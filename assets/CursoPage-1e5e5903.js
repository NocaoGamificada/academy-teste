import{d as J,x as f,o as V,y as K,r as b,k as W,a as c,c as r,e as o,u as A,w as x,v as _,F as C,l as j,m as v,j as Y,i as M,t as S,b as Z,g as ee,z as te,p as oe,h as se,_ as ne}from"./index-a7b2b98b.js";import{a as y,c as le,G as q,v as E,q as ae,e as ie}from"./apiRoutes-5f16bb7e.js";const p=I=>(oe("data-v-bbd10807"),I=I(),se(),I),ce={key:0,class:"col-8 p-5",style:{"min-width":"756px"}},re=p(()=>o("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"var(--highlight-color-01)",class:"bi bi-arrow-left-short",viewBox:"0 0 16 16"},[o("path",{"fill-rule":"evenodd",d:"M12 8a.5.5 0 0 1-.5.5H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H11.5a.5.5 0 0 1 .5.5z"})],-1)),de=p(()=>o("p",{class:"mb-0"},"Voltar",-1)),ue=[re,de],pe={id:"form",action:""},me={class:"d-flex justify-content-between"},fe={id:"categoriasSelect",class:"col-6"},ve={class:"select-field rounded-5 d-flex justify-content-between pe-3 overflow-hidden"},ge=p(()=>o("input",{id:"selectCategoryInput",class:"input form-control text-nowrap",type:"text",placeholder:"Categorias"},null,-1)),he={id:"selectedCategories",class:"col-5 d-flex flex-wrap align-items-center justify-content-start"},xe={class:"selected-category ps-3 py-1 rounded-5 d-flex me-3 my-2 justify-content-between"},ye=["id"],we=p(()=>o("img",{id:"selectBtn",class:"select-icon px-3",src:"icons/caret-down-fill.svg",alt:""},null,-1)),be={id:"categoriesBoard",class:"select-field-categories mt-2 rounded-5 d-flex overflow-y-hidden"},_e={class:"col-12 d-flex pt-5 pb-4 px-5 flex-wrap overflow-x-hidden"},Ce=["id"],qe={key:0,class:"text"},Ie=Y('<div class="col-12 d-flex flex-row mt-2" data-v-bbd10807><div class="col-6" data-v-bbd10807><div class="d-flex flex-row align-items-center justify-content-center position-relative" style="width:274px;" data-v-bbd10807><img class="img border" src="imgs/marke-se academy-logo.png" alt="" style="width:100%;" data-v-bbd10807><img class="img icon position-absolute" src="icons/camera-fill.svg" alt="" style="width:40px;height:40px;" data-v-bbd10807></div><button class="button px-5 py-2 mb-0 rounded-5 d-flex justify-content-center align-items-center mt-3" style="background:var(--highlight-color-01);" data-v-bbd10807>Salvar alterações</button></div><div class="col-6" data-v-bbd10807><div class="d-flex justify-content-start align-items-center" data-v-bbd10807><img class="icon" src="imgs/diploma-icon-10248.png" alt="" style="width:140px;height:auto;" data-v-bbd10807><img class="img icon ms-3" src="icons/arrow-clockwise.svg" alt="" style="width:26px;" data-v-bbd10807></div><div class="d-flex justify-content-start align-items-center" data-v-bbd10807><button class="button px-5 py-2 mb-0 rounded-5 d-flex justify-content-center align-items-center" style="background:var(--text-light-color);" data-v-bbd10807>Material do curso</button><img class="icon ms-3" src="icons/trash-fill.svg" alt="" style="width:26px;height:33px;" data-v-bbd10807><img class="icon ms-3" src="icons/plus-square-fill.svg" alt="" style="width:26px;height:33px;" data-v-bbd10807></div><input class="input form-control rounded-5 my-3 p-0 px-3 py-1" type="text" placeholder="Preço: " data-v-bbd10807></div></div>',1),ke={class:"col-11 d-flex flex-column justify-content-between mt-5"},je=p(()=>o("div",{class:"col-8 d-flex justify-content-between"},[o("h4",{class:"title"},"Modulos"),o("p",{class:"text mb-0 d-flex align-items-center"},"Quantidade de Visualizações: XX")],-1)),Me={class:"col-12 d-flex flex-column flex-nowrap mt-3"},Se={class:"d-flex flex-row flex-nowrap justify-content-between mb-4"},Be={class:"col-10 d-flex flex-row justify-content-start align-items-center flex-nowrap px-4 py-3 rounded-5",style:{background:"var(--secondary-color)"}},Ve=p(()=>o("img",{class:"icon",src:"icons/play-btn.svg",alt:"",style:{width:"40px"}},null,-1)),Ae={class:"col-9 px-4 text mb-0 text-start"},Ee={class:"text mb-0 text-nowrap"},He={class:"col-2 d-flex flex-row justify-content-start align-items-center"},Ne=p(()=>o("button",{class:"button px-5 py-2 mb-0 mx-3 rounded-5 d-flex justify-content-center align-items-center",style:{background:"var(--highlight-color-01)"}},"Editar",-1)),Le=["onClick"],Ue=p(()=>o("button",{id:"newModuloBtn",class:"button px-5 py-2 mb-0 rounded-5 d-flex justify-content-center align-items-center",style:{background:"var(--highlight-color-01)"}},"Adicionar novo modulo",-1)),De={id:"addNewModulo",class:"col-12 mt-5"},Fe={class:"w-100 d-flex flex-row justify-content-between"},Pe={style:{width:"433px",height:"auto"}},ze={class:"border rounded-4 d-flex flex-row justify-content-center align-items-center ps-3 pt-2 mt-4",style:{width:"433px",height:"fit-content",padding:"10px 0px","border-color":"var(--highlight-color-01) !important"}},$e={for:"module-video",class:"col-9 d-flex flex-column"},Re={key:0,class:"text",style:{"font-size":"20px","margin-top":"5px"}},Te={key:1,class:"text",style:{"font-size":"20px","margin-bottom":"5px"}},Qe={key:2,class:"text",style:{"font-size":"20px",cursor:"pointer"}},Ge=["src"],Oe={class:"col-4"},Xe={class:"col-12"},Je={class:"d-flex flex-column"},Ke=p(()=>o("div",{class:"w-100 d-flex flex-row justify-content-between secondary-bg px-3 py-2 pe-4 rounded-5",style:{cursor:"pointer"}},[o("p",{class:"text col-9 mb-0 text-nowrap"},"Selecionar Resposta"),o("img",{class:"questionAnswers-icon px-5",src:"icons/caret-down-fill.svg",alt:"",style:{filter:"invert(1)"}})],-1)),We={class:"questionAnswers overflow-y-hidden mt-2 border-5",style:{"max-height":"0px"}},Ye={class:"input px-3 d-flex flex-row justify-content-center align-items-center p-1"},Ze=["name","value"],et=["onUpdate:modelValue","placeholder"],tt=J({__name:"CursoPage",setup(I){const w=f([{name:"Finanças",id:"1"},{name:"Economia",id:"2"},{name:"Crypto",id:"3"}]),g=f([]);let u=f([]);function L(e){e.style.maxHeight="0px",document.querySelector("#selectBtn").classList.remove("select-close-icon")}function H(e){e.style.maxHeight="200px",document.querySelector("#selectBtn").classList.add("select-close-icon")}function k(){return w.map(e=>!g.includes(e))}function U(e){const t=document.querySelector("#selectCategoryInput"),n=e.target;let s=w.find(l=>l.id==n.id);s!==void 0&&!g.includes(s)&&(g.push(s),t.value="",u=f(k()))}function D(e){e!==void 0&&e.style.maxHeight==="0px"?H(e):L(e)}function F(e){const t=e.target;return t&&w.map(n=>n.name.toLowerCase().includes(t.value.toLowerCase())&&!g.some(s=>s.name.toLowerCase()===n.name.toLowerCase()))}function P(e,t){const n=e.target;n.value.length>0&&(H(t),u.length=0,u=f(F(e))),n.value.length===0&&(u.length=0,u=f(k()))}V(()=>{u.push(...k());const e=document.querySelector("#selectBtn"),t=document.querySelector("#selectCategoryInput"),n=document.querySelector("#categoriesBoard");document.querySelector("#categoriasSelect").onclick=()=>t.focus(),n.style.maxHeight="0px",e.onclick=()=>D(n),t.oninput=s=>P(s,n)}),K(()=>{let e=document.querySelectorAll(".selected-category-close");Array.from(e).forEach((t,n)=>{t.onclick=()=>{g.splice(n,1),u.length=0,u=f(k())}})});const m=b({id:0,title:"",description:"",price:0}),N=b([]),z=b(!1),d=b({title:"",questionInfo:{question:"",answers:{a:{content:""},b:{content:""},c:{content:""},d:{content:""},e:{content:""}},correct:""}}),$=async()=>{const{id:e}=M.currentRoute.value.params;if(isNaN(Number(e)))window.alert("id de curso invalido!"),M.push("/");else try{const t=await y.get(le.getCourse+"?courseId="+e,{headers:q()});m.value=t.data.course,N.value=t.data.videos}catch{}},R=async()=>{event==null||event.preventDefault();const e={title:d.value.title,courseId:m.value.id};try{const t=await y.post(E.addInCourse,e),n=Number(t.data),s=Q(d.value);await y.post(ae.addQuestionInVideo+`?videoCourseId=${n}`,s,{headers:q()}),await T(n)}catch{}};async function T(e){var t,n,s,l;try{const a=d.value;if(a.videoFile==null)return;try{const i=new FormData;i.append("video",a.videoFile),await y.put(E.uplaodingInCourse+`?videoCourseId=${e}`,i,{headers:{...q()},onUploadProgress:B=>{B.total&&console.log(Math.round(B.loaded*100/B.total))}})}catch(i){(n=(t=i==null?void 0:i.respose)==null?void 0:t.data)!=null&&n.messageError?window.alert((l=(s=i==null?void 0:i.respose)==null?void 0:s.data)==null?void 0:l.messageError):window.alert("Houve um erro inesperado ao tentar enviar um video!");return}window.location.reload()}catch(a){window.alert(a.response)}}function Q(e){const t={question:e.questionInfo.question,options:[]},n=e.questionInfo.answers;return t.options.push({content:n.a.content,isCorrect:e.questionInfo.correct=="a"}),t.options.push({content:n.b.content,isCorrect:e.questionInfo.correct=="b"}),t.options.push({content:n.c.content,isCorrect:e.questionInfo.correct=="c"}),t.options.push({content:n.d.content,isCorrect:e.questionInfo.correct=="d"}),t.options.push({content:n.e.content,isCorrect:e.questionInfo.correct=="e"}),t}V(()=>{const e=document.querySelectorAll(".questionAnswers"),t=document.querySelectorAll(".questionAnswers-icon ");Array.from(e).forEach(n=>{n.style.maxHeight="0px !important"}),Array.from(t).forEach((n,s)=>{const l=n.parentElement;l.onclick=a=>{a.stopPropagation(),e[s].style.maxHeight<="0px"?e[s].style.maxHeight="250px":e[s].style.maxHeight="0px"}})}),V(()=>{const e=document.querySelector("#addNewModulo"),t=document.querySelector("#newModuloBtn");e.style.display="none",t.onclick=n=>{n.preventDefault(),e.style.display="block"}}),$();async function G(e){var n,s,l,a;if(window.confirm("vc realmente deseja excluir este video?"))try{await y.delete(E.deleteVideo+`?videoCourseId=${e}`,{headers:q()}),window.alert("Video exluido com sucesso"),window.location.reload()}catch(i){(s=(n=i==null?void 0:i.respose)==null?void 0:n.data)!=null&&s.messageError?window.alert((a=(l=i==null?void 0:i.respose)==null?void 0:l.data)==null?void 0:a.messageError):window.alert("Houve um erro inesperado ao tentar enviar um video!")}}const h=b("");function O(e){d.value.videoFile=e.target.files[0],e.target.files[0]&&(h.value=URL.createObjectURL(e.target.files[0]))}async function X(){var t,n,s,l;if(event==null||event.preventDefault(),window.confirm("Você realmente deseja excluir o presente curso?"))try{await y.delete(ie.removeCourse+`?courseId=${m.value.id}`,{headers:q()}),await M.push("/academy-criador/meus-cursos")}catch(a){(n=(t=a==null?void 0:a.respose)==null?void 0:t.data)!=null&&n.messageError?window.alert((l=(s=a==null?void 0:a.respose)==null?void 0:s.data)==null?void 0:l.messageError):window.alert("Houve um erro inesperado ao tentar enviar um video!")}}return(e,t)=>{const n=W("router-link");return z.value?v("",!0):(c(),r("section",ce,[o("div",{style:{cursor:"pointer"},onClick:t[0]||(t[0]=async()=>await A(M).back()),class:"voltar-link d-flex align-items-center"},ue),o("form",pe,[x(o("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>m.value.title=s),class:"input form-control rounded-5 mb-3",type:"text",placeholder:"Título do Curso"},null,512),[[_,m.value.title]]),o("div",me,[x(o("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>m.value.description=s),class:"input-2 form-control rounded-5 mb-3",type:"text",placeholder:"Subtítulo",style:{height:"42px","max-width":"45%"}},null,512),[[_,m.value.description]]),o("div",fe,[o("div",ve,[ge,o("div",he,[(c(!0),r(C,null,j(g,(s,l)=>(c(),r("span",xe,[o("span",null,S(s.name),1),o("img",{id:String(l),class:"px-1 selected-category-close",src:"icons/x.svg",alt:""},null,8,ye)]))),256))]),we]),o("div",be,[o("div",_e,[(c(!0),r(C,null,j(A(u),(s,l)=>(c(),r(C,null,[s?(c(),r("div",{key:0,class:"available-categories text px-3 py-1 rounded-5 me-3 mb-2 text-nowrap",id:w[l].id,onClick:U},S(w[l].name),9,Ce)):v("",!0)],64))),256)),A(u).some(s=>s===!0)?v("",!0):(c(),r("div",qe," Não existem outras categorias disponíveis "))])])])]),Ie,o("div",ke,[je,o("div",Me,[(c(!0),r(C,null,j(N.value,s=>(c(),r("div",Se,[o("div",Be,[Ve,o("p",Ae,"Módulo "+S(s.index),1),o("p",Ee,S(s.title),1)]),o("div",He,[Z(n,{to:"editar-modulo/1"},{default:ee(()=>[Ne]),_:1}),o("img",{onClick:()=>G(s.id),class:"icon",src:"icons/trash-fill.svg",alt:"",style:{width:"26px",height:"33px",cursor:"pointer"}},null,8,Le)])]))),256)),o("div",{class:"col-12 d-flex flex-row justify-content-start"},[Ue,o("button",{onClick:X,class:"button px-5 py-2 mb-0 ms-2 rounded-5 d-flex justify-content-center align-items-center",style:{background:"var(--highlight-color-01)"}},"Excluir curso")])])]),o("div",De,[x(o("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>d.value.title=s),class:"input form-control rounded-5 mb-3",type:"text",placeholder:"Nome do Módulo"},null,512),[[_,d.value.title]]),o("div",Fe,[o("div",Pe,[o("div",ze,[o("label",$e,[h.value?v("",!0):(c(),r("p",Re,"Video do curso")),h.value?v("",!0):(c(),r("p",Te,"Máximo de 1gb")),h.value?(c(),r("p",Qe,"Trocar video")):v("",!0),h.value?(c(),r("video",{key:3,src:h.value,alt:"",class:"h-100",controlslist:"nodownload",controls:""},null,8,Ge)):v("",!0)]),o("input",{onChange:O,id:"module-video",type:"file",accept:"video/mp4",hidden:""},null,32)])]),o("div",Oe,[o("div",Xe,[o("div",Je,[x(o("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>d.value.questionInfo.question=s),class:"questionInput input form-control rounded-5 mb-3",type:"text",placeholder:"Pergunta"},null,512),[[_,d.value.questionInfo.question]]),Ke,o("div",We,[(c(!0),r(C,null,j(d.value.questionInfo.answers,(s,l)=>(c(),r("div",Ye,[x(o("input",{onChange:t[5]||(t[5]=()=>console.log(d.value)),name:`resposta-${l}}}`,class:"",type:"radio",value:l,"onUpdate:modelValue":t[6]||(t[6]=a=>d.value.questionInfo.correct=a)},null,40,Ze),[[te,d.value.questionInfo.correct]]),x(o("input",{"onUpdate:modelValue":a=>d.value.questionInfo.answers[l].content=a,class:"input form-control",type:"text",placeholder:`${l}`},null,8,et),[[_,d.value.questionInfo.answers[l].content]])]))),256))])])])])]),o("button",{onClick:R,class:"col-5 btn button rounded-5 mt-3 d-flex justify-content-center align-items-center highlight-bg"}," Concluir ")])])]))}}});const nt=ne(tt,[["__scopeId","data-v-bbd10807"]]);export{nt as default};
