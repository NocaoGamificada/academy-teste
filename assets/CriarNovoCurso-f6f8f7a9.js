import{d as de,x as g,r as f,y as P,o as Q,a as l,c as r,e as s,w as y,v as _,F as w,l as I,u as G,m as U,j as J,t as E,z as ue,p as pe,h as fe,_ as me}from"./index-a7b2b98b.js";import{a as V,e as he,G as k,v as R,q as O}from"./apiRoutes-5f16bb7e.js";const m=S=>(pe("data-v-e7c258f0"),S=S(),fe(),S),ve={key:0,class:"col-12 p-5",style:{"min-width":"100vw"}},ge=m(()=>s("h4",{class:"title mb-5"},"Criar Novo Curso",-1)),ye={id:"categoriasSelect",class:"col-12"},xe={class:"select-field rounded-5 d-flex justifyu-content-between pe-3 overflow-hidden"},_e=m(()=>s("input",{id:"selectCategoryInput",class:"input form-control text-nowrap",type:"text",placeholder:"Categorias"},null,-1)),we={id:"selectedCategories",class:"col-8 d-flex flex-wrap align-items-center"},be={class:"selected-category ps-3 py-1 rounded-5 d-flex me-3 justify-content-between"},Ce=["id"],qe=m(()=>s("img",{id:"selectBtn",class:"select-icon px-5",src:"icons/caret-down-fill.svg",alt:""},null,-1)),Ie={id:"categoriesBoard",class:"select-field-categories mt-2 rounded-5 d-flex overflow-y-hidden"},Ve={class:"col-12 d-flex p-5"},ke=["id"],Se={key:0,class:"text"},je={class:"col-12 mt-2 d-flex justify-content-between"},Be={class:"d-flex flex-column"},Ae={class:"border rounded-4 d-flex flex-row justify-content-center ps-3 pt-2 mb-3",style:{width:"500px",height:"96px","border-color":"var(--highlight-color-01) !important"}},Ue=m(()=>s("div",{class:"col-9 d-flex flex-column"},[s("p",{class:"text",style:{"font-size":"20px"}},"Imagem de capa"),s("p",{class:"text",style:{"font-size":"20px"}},"1280 x 720px")],-1)),Ee=m(()=>s("img",{src:"icons/upload.svg",alt:"",class:"h-100",style:{filter:"invert(1)",width:"53px",height:"49px"}},null,-1)),Me=J('<div class="border rounded-4 d-flex flex-row justify-content-center align-items-center ps-3 pt-2 mb-3" style="width:331px;height:134px;border-color:var(--highlight-color-01) !important;" data-v-e7c258f0><div class="col-9 d-flex flex-column" data-v-e7c258f0><p class="text" style="font-size:20px;" data-v-e7c258f0>Adicionar Certificado</p><p class="text" style="font-size:20px;" data-v-e7c258f0>1280 x 720px</p></div><img src="icons/upload.svg" alt="" class="h-100" style="filter:invert(1);width:53px;height:49px;" data-v-e7c258f0></div>',1),Ne={class:"col-3 mt-3"},De=m(()=>s("button",{class:"w-100 btn button rounded-5 mt-3 d-flex justify-content-center align-items-center"},[s("span",{class:"w-75 h-100 button mt-1",style:{background:"transparent"}},"Material do curso"),s("img",{src:"icons/upload.svg",alt:"",class:"h-100",style:{filter:"invert(0)",width:"53px",height:"49px"}})],-1)),He={class:"col-12 mt-5"},Fe=["onUpdate:modelValue"],Le={class:"w-100 d-flex flex-row justify-content-between"},ze={style:{width:"433px",height:"auto"}},Te=J('<div class="border rounded-4 d-flex flex-row justify-content-center align-items-center ps-3 pt-2 mt-4" style="width:433px;height:222px;border-color:var(--highlight-color-01) !important;" data-v-e7c258f0><div class="col-9 d-flex flex-column" data-v-e7c258f0><p class="text" style="font-size:20px;" data-v-e7c258f0>Imagem de capa</p><p class="text" style="font-size:20px;" data-v-e7c258f0>1280 x 720px</p></div><img src="icons/upload.svg" alt="" class="h-100" style="filter:invert(1);width:53px;height:49px;" data-v-e7c258f0></div>',1),$e=m(()=>s("p",{class:"text",style:{"font-size":"20px"}},"Video",-1)),Pe=["onChange"],Qe={class:"col-4"},Ge={class:"col-12"},Re={class:"d-flex flex-column"},Oe=["onUpdate:modelValue"],Je=m(()=>s("div",{class:"w-100 d-flex flex-row justify-content-between secondary-bg px-3 py-2 pe-4 rounded-5",style:{cursor:"pointer"}},[s("p",{class:"text col-9 mb-0 text-nowrap"},"Selecionar Resposta"),s("img",{class:"questionAnswers-icon px-5",src:"icons/caret-down-fill.svg",alt:"",style:{filter:"invert(1)"}})],-1)),Ke={class:"questionAnswers overflow-y-hidden mt-2 border-5",style:{"max-height":"0px"}},We={class:"input px-3 d-flex flex-row justify-content-center align-items-center p-1"},Xe=["name","value","onUpdate:modelValue"],Ye=["onUpdate:modelValue","placeholder"],Ze={key:1,class:"w-100 h-100",style:{display:"flex","justify-content":"center","align-items":"center"}},et=m(()=>s("h1",{class:"title"},"Estamos criando o curso",-1)),tt=[et],ot={key:2,class:"col-12 p-5",style:{"min-width":"100vw"}},st={style:{color:"white"}},nt={key:0,class:"row-12 p-5"},at=de({__name:"CriarNovoCurso",setup(S){const b=g([{name:"Finanças",id:"1"},{name:"Economia",id:"2"},{name:"Crypto",id:"3"}]),v=f([{info:{title:"",description:""},questionInfo:{question:"",answers:{a:{content:"",correct:!1},b:{content:"",correct:!1},c:{content:"",correct:!1},d:{content:"",correct:!1},e:{content:"",correct:!1}},correct:0}}]),M=f(""),N=f(""),H=f(null),C=f(""),h=f(!1),j=f(!1),B=f([]),F=f(!1),x=g([]);let u=g([]);function K(t){t.style.maxHeight="0px",document.querySelector("#selectBtn").classList.remove("select-close-icon")}function L(t){t.style.maxHeight="200px",document.querySelector("#selectBtn").classList.add("select-close-icon")}function A(){return b.map(t=>!x.includes(t))}function W(t){const o=document.querySelector("#selectCategoryInput"),e=t.target;let n=b.find(c=>c.id==e.id);n!==void 0&&!x.includes(n)&&(x.push(n),o.value="",u=g(A()))}function X(t){t!==void 0&&t.style.maxHeight==="0px"?L(t):K(t)}function Y(t){const o=t.target;return o&&b.map(e=>e.name.toLowerCase().includes(o.value.toLowerCase())&&!x.some(n=>n.name.toLowerCase()===e.name.toLowerCase()))}function Z(t,o){const e=t.target;e.value.length>0&&(L(o),u.length=0,u=g(Y(t))),e.value.length===0&&(u.length=0,u=g(A()))}async function ee(){event==null||event.preventDefault(),await se()&&await z()}async function z(){var o,e,n,c;if(isNaN(Number(C.value.replace(",",".")))||C.value.trim().length==0){window.alert("por favor digite um preço valido");return}try{const a=new FormData;a.append("title",M.value),a.append("description",N.value),a.append("price",C.value),a.append("thumb",H.value);var t=await V.post(he.addCourse,a,{headers:k()});h.value=!1,await te(t.data.id),h.value=!1}catch(a){(e=(o=a==null?void 0:a.respose)==null?void 0:o.data)!=null&&e.messageError?window.alert((c=(n=a==null?void 0:a.respose)==null?void 0:n.data)==null?void 0:c.messageError):window.alert("Houve um erro inesperado!"),h.value=!1}}async function te(t){var e,n,c,a;const o=[...v.value];for(let i=0;i<o.length;i++){const q=o[i].info;q.courseId=t;try{const d=await V.post(R.addInCourse,q,{headers:k()});q.id=Number(d.data)}catch(d){(n=(e=d==null?void 0:d.respose)==null?void 0:e.data)!=null&&n.messageError?window.alert((a=(c=d==null?void 0:d.respose)==null?void 0:c.data)==null?void 0:a.messageError):window.alert("Houve um erro inesperado!")}}await oe(o),await ne(o)}async function oe(t){for(let o=0;o<t.length;o++){const e=t[o].info,n=T(t,o);try{await V.post(O.addQuestionInVideo+`?videoCourseId=${e.id}`,n,{headers:k()})}catch(c){h.value=!1,console.error(c.response),window.alert("Deu algo de errado ao criar uma questão!")}}}async function se(){var t,o;try{h.value=!0;const e=[...v.value];for(let n=0;n<e.length;n++){const c=T(e,n);await V.post(O.checkValid,c,{headers:k()})}return!0}catch(e){return h.value=!1,window.alert((o=(t=e==null?void 0:e.respose)==null?void 0:t.data)==null?void 0:o.messageError),!1}}async function ne(t){var o,e,n,c;window.alert("Começaremos a enviar os videos dos modulos, por favor não feche esta janela"),j.value=!0;for(let a=0;a<t.length;a++){const i=t[a];if(i.videoFile==null)continue;const q={title:i.info.title,percentage:0},d=B.value.push(q)-1;try{const p=new FormData;p.append("video",i.videoFile),await V.put(R.uplaodingInCourse+`?videoCourseId=${i.info.id}`,p,{headers:{...k()},onUploadProgress:D=>{const $={...B.value[d]};D.total&&($.percentage=Math.round(D.loaded*100/D.total)),B.value[d]=$}})}catch(p){(e=(o=p==null?void 0:p.respose)==null?void 0:o.data)!=null&&e.messageError?window.alert((c=(n=p==null?void 0:p.respose)==null?void 0:n.data)==null?void 0:c.messageError):window.alert("Houve um erro inesperado ao tentar enviar um video!"),j.value=!1;return}}window.alert("curso criado com sucesso!"),F.value=!0}function T(t,o){const e={question:t[o].questionInfo.question,options:[]},n=t[o].questionInfo.answers;return e.options.push({content:n.a.content,isCorrect:t[o].questionInfo.correct=="a"}),e.options.push({content:n.b.content,isCorrect:t[o].questionInfo.correct=="b"}),e.options.push({content:n.c.content,isCorrect:t[o].questionInfo.correct=="c"}),e.options.push({content:n.d.content,isCorrect:t[o].questionInfo.correct=="d"}),e.options.push({content:n.e.content,isCorrect:t[o].questionInfo.correct=="e"}),e}function ae(t){H.value=t.target.files[0]}function ce(){const t={info:{title:"",description:""},questionInfo:{question:"",answers:{a:{content:"",correct:!1},b:{content:"",correct:!1},c:{content:"",correct:!1},d:{content:"",correct:!1},e:{content:"",correct:!1}},correct:0}};v.value=[...v.value,t]}function le(t,o){v.value[t].videoFile=o,console.log(v.value[t].videoFile)}function re(){window.location.reload()}function ie(){window.location.href="/academy-criador/meus-cursos"}return P(()=>{let t=document.querySelectorAll(".selected-category-close");Array.from(t).forEach((o,e)=>{o.onclick=()=>{x.splice(e,1),u.length=0,u=g(A())}})}),Q(()=>{u.push(...A());const t=document.querySelector("#selectBtn"),o=document.querySelector("#selectCategoryInput"),e=document.querySelector("#categoriesBoard");document.querySelector("#categoriasSelect").onclick=()=>o.focus(),e.style.maxHeight="0px",t.onclick=()=>X(e),o.oninput=n=>Z(n,e)}),P(()=>{const t=document.querySelectorAll(".questionAnswers"),o=document.querySelectorAll(".questionAnswers-icon ");Array.from(t).forEach(e=>{e.style.maxHeight="0px !important"}),Array.from(o).forEach((e,n)=>{const c=e.parentElement;c.onclick=a=>{a.stopPropagation(),t[n].style.maxHeight<="0px"?t[n].style.maxHeight="250px":t[n].style.maxHeight="0px"}})}),Q(()=>{const t=document.querySelector("form");t.onsubmit=o=>{o.preventDefault()}}),(t,o)=>j.value?h.value?(l(),r("section",Ze,tt)):j.value&&!h.value?(l(),r("section",ot,[(l(!0),r(w,null,I(B.value,e=>(l(),r("div",null,[s("h1",st,E(e.title)+" : "+E(e.percentage),1)]))),256)),F.value?(l(),r("div",nt,[s("button",{onClick:re,type:"submit",class:"col-5 btn button rounded-5 mt-3 d-flex justify-content-center align-items-center"}," Criar outro "),s("button",{onClick:ie,type:"submit",class:"col-5 btn button rounded-5 mt-3 d-flex justify-content-center align-items-center"}," Meus cursos ")])):U("",!0)])):U("",!0):(l(),r("section",ve,[ge,s("form",{id:"form",class:"form col-7 pb-5",action:"","on-submit":z},[y(s("input",{"onUpdate:modelValue":o[0]||(o[0]=e=>M.value=e),class:"input form-control rounded-5 mb-3",type:"text",placeholder:"Título do Curso"},null,512),[[_,M.value]]),y(s("input",{"onUpdate:modelValue":o[1]||(o[1]=e=>N.value=e),class:"input form-control rounded-5 mb-3",type:"text",placeholder:"Subtítulos"},null,512),[[_,N.value]]),s("div",ye,[s("div",xe,[_e,s("div",we,[(l(!0),r(w,null,I(x,(e,n)=>(l(),r("span",be,[s("span",null,E(e.name),1),s("img",{id:String(n),class:"px-1 selected-category-close",src:"icons/x.svg",alt:""},null,8,Ce)]))),256))]),qe]),s("div",Ie,[s("div",Ve,[(l(!0),r(w,null,I(G(u),(e,n)=>(l(),r(w,null,[e?(l(),r("div",{key:0,class:"available-categories text px-3 py-1 rounded-5 me-3 text-nowrap",id:b[n].id,onClick:W},E(b[n].name),9,ke)):U("",!0)],64))),256)),G(u).some(e=>e===!0)?U("",!0):(l(),r("div",Se," Não existem outras categorias disponíveis "))])])]),s("div",je,[s("div",Be,[s("label",Ae,[Ue,s("input",{onChange:ae,id:"thumbnail",type:"file",accept:"image/*",hidden:""},null,32),Ee]),Me]),s("div",Ne,[y(s("input",{"onUpdate:modelValue":o[2]||(o[2]=e=>C.value=e),class:"input form-control text-nowrap rounded-5",type:"text","data-mask":"#.##0,00",placeholder:"Valor do Curso"},null,512),[[_,C.value]]),De])]),(l(!0),r(w,null,I(v.value,(e,n)=>(l(),r("div",He,[y(s("input",{"onUpdate:modelValue":c=>e.info.title=c,class:"input form-control rounded-5 mb-3",type:"text",placeholder:"Nome do Módulo"},null,8,Fe),[[_,e.info.title]]),s("div",Le,[s("div",ze,[Te,s("div",null,[$e,s("input",{onChange:c=>le(n,c.target.files[0]),type:"file",accept:"video/mp4"},null,40,Pe)])]),s("div",Qe,[s("div",Ge,[s("div",Re,[y(s("input",{"onUpdate:modelValue":c=>e.questionInfo.question=c,class:"questionInput input form-control rounded-5 mb-3",type:"text",placeholder:"Pergunta"},null,8,Oe),[[_,e.questionInfo.question]]),Je,s("div",Ke,[(l(!0),r(w,null,I(e.questionInfo.answers,(c,a)=>(l(),r("div",We,[y(s("input",{name:`resposta-${n}}}`,value:`${a}`,type:"radio","onUpdate:modelValue":i=>e.questionInfo.correct=i},null,8,Xe),[[ue,e.questionInfo.correct]]),y(s("input",{"onUpdate:modelValue":i=>e.questionInfo.answers[a].content=i,class:"input form-control",type:"text",placeholder:`${a}`},null,8,Ye),[[_,e.questionInfo.answers[a].content]])]))),256))])])])])])]))),256)),s("div",{class:"w-100 d-flex flex-row justify-content-between mt-4"},[s("button",{onClick:ce,class:"col-5 btn button rounded-5 mt-3 d-flex justify-content-center align-items-center"}," Adicionar novo Módulo "),s("button",{onClick:ee,type:"submit",class:"col-5 btn button rounded-5 mt-3 d-flex justify-content-center align-items-center"}," Concluir ")])],32)]))}});const rt=me(at,[["__scopeId","data-v-e7c258f0"]]);export{rt as default};
